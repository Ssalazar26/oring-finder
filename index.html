<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>O-Ring Dash Finder</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; display: flex; justify-content: center; padding: 40px; background: #f0f2f5; color: #333; }
        .card { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); width: 380px; }
        h2 { margin: 0 0 20px 0; border-bottom: 3px solid #ce1126; padding-bottom: 8px; font-size: 1.3rem; text-align: center; }
        label { display: block; font-size: 11px; font-weight: 800; margin-bottom: 5px; color: #666; letter-spacing: 0.5px; }
        input { width: 100%; padding: 12px; margin-bottom: 15px; border: 2px solid #eee; border-radius: 8px; box-sizing: border-box; font-size: 16px; outline: none; }
        input:focus { border-color: #ce1126; }
        .btn { width: 100%; padding: 16px; background: #ce1126; color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 1rem; transition: background 0.2s; }
        .btn:hover { background: #a00d1e; }
        #results { margin-top: 25px; text-align: center; display: none; background: #fff9f9; padding: 20px; border-radius: 8px; border: 1px solid #ffeaea; }
        .dash-text { font-size: 64px; font-weight: 900; color: #222; margin: 10px 0; display: block; }
        .mc-link { display: inline-block; margin-top: 15px; padding: 12px 20px; background: #333; color: white; text-decoration: none; border-radius: 6px; font-weight: bold; font-size: 14px; }
    </style>
</head>
<body>

<div class="card">
    <h2>O-Ring Dash Finder</h2>
    
    <label>CIRCUMFERENCE (INCHES)</label>
    <input type="number" id="length" step="any" placeholder="e.g. 4.110">

    <label>CROSS SECTION / WIDTH (INCHES)</label>
    <input type="number" id="cs" step="any" placeholder="e.g. 0.139">

    <button type="button" id="calcBtn" class="btn">IDENTIFY DASH SIZE</button>

    <div id="results">
        <div style="font-size: 12px; color: #999; font-weight: bold;">MATCHED AS568 DASH NUMBER</div>
        <span class="dash-text" id="dashOut"></span>
        <a id="mcLink" class="mc-link" target="_blank" href="">VIEW ON MCMASTER-CARR</a>
    </div>
</div>

<script>
    // Standard AS568 Database (Common 000, 100, 200, 300 Series)
    const as568Data = [
        {d:"006", id:0.114, cs:0.070}, {d:"007", id:0.145, cs:0.070}, {d:"008", id:0.176, cs:0.070}, {d:"009", id:0.208, cs:0.070}, {d:"010", id:0.239, cs:0.070}, {d:"011", id:0.301, cs:0.070}, {d:"012", id:0.364, cs:0.070},
        {d:"110", id:0.362, cs:0.103}, {d:"111", id:0.424, cs:0.103}, {d:"112", id:0.487, cs:0.103}, {d:"113", id:0.549, cs:0.103}, {d:"114", id:0.612, cs:0.103}, {d:"115", id:0.674, cs:0.103}, {d:"116", id:0.737, cs:0.103}, {d:"117", id:0.799, cs:0.103},
        {d:"210", id:0.734, cs:0.139}, {d:"211", id:0.796, cs:0.139}, {d:"212", id:0.859, cs:0.139}, {d:"213", id:0.921, cs:0.139}, {d:"214", id:0.984, cs:0.139}, {d:"215", id:1.046, cs:0.139}, {d:"216", id:1.109, cs:0.139}, {d:"217", id:1.171, cs:0.139}, {d:"218", id:1.234, cs:0.139},
        {d:"325", id:1.475, cs:0.210}, {d:"326", id:1.600, cs:0.210}, {d:"327", id:1.725, cs:0.210}, {d:"328", id:1.850, cs:0.210}, {d:"329", id:1.975, cs:0.210}
    ];

    // Added an Event Listener instead of 'onclick' for better compatibility
    document.getElementById('calcBtn').addEventListener('click', function() {
        var lenIn = document.getElementById('length').value;
        var csIn = document.getElementById('cs').value;

        if (!lenIn || !csIn) {
            alert("Please fill in both measurements.");
            return;
        }

        var circumference = parseFloat(lenIn);
        var crossSection = parseFloat(csIn);

        // 1. Calculate Target ID (Nominal groove ID minus 2% stretch)
        var targetID = ((circumference / 3.14159) - crossSection) / 1.02;

        var bestMatch = null;
        var minDiff = 9999;

        // 2. Scan Database
        for (var i = 0; i < as568Data.length; i++) {
            var item = as568Data[i];
            // Check if cross section is within tolerance
            if (Math.abs(item.cs - crossSection) < 0.02) {
                var idDiff = Math.abs(item.id - targetID);
                if (idDiff < minDiff) {
                    minDiff = idDiff;
                    bestMatch = item;
                }
            }
        }

        // 3. Display Result
        if (bestMatch) {
            document.getElementById('dashOut').innerText = "-" + bestMatch.d;
            document.getElementById('mcLink').href = "https://www.mcmaster.com/products/o-rings/dash-number~" + bestMatch.d + "/";
            document.getElementById('results').style.display = 'block';
        } else {
            alert("No standard AS568 size matches those dimensions. Please check your cross-section.");
        }
    });
</script>
</body>
</html>
